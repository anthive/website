## Введение

**AntHive** это многопользовательская соревновательная стратегия, в которой каждый игрок создает собственную колонию муравьев.

Как и в реальной жизни, муравьи добывают **еду**, строят **муравейники**.

[<img src="/img/game-animation.gif" alt="ants" title="ants" width="100%"/>](//img/game-animation.gif)

**AntHive** - игра для программистов с разным уровнем навыков. В отличие от обычных стратегий, муравьи в AntHive реагируют на события так, как вы их запрограммируете.

<br>

## Основная задача

Вы создаете **бота**, который управляет муравьями вашей колонии и запускаете его в одном из игровых режимов. Все игры происходят на сервере без вашего участия. 

<br>

## Элементы игры

### Карта

Игровая карта это плоскость состоящая из **ячеек**, каждая из которых имеет свои собственные координаты **X** и **Y**. Отсчет координат начинается **в верхнем левом углу карты**. 

[<img src="/img/map-debug-mode.png" title="anthive map" alt="anthive map" width="100%"/>](/img/map-debug-mode.png)

На каждой из ячеек могут находится объекты:
* Муравей [<img src="https://raw.githubusercontent.com/anthive/website/master/static/skins/client/1/ant.png" title="ant" alt="ant" width="20"/>](https://raw.githubusercontent.com/anthive/website/master/static/skins/client/1/ant.png)
* Муравейник [<img src="https://raw.githubusercontent.com/anthive/website/master/static/skins/client/1/hive.png" title="anthive" alt="ant" width="20"/>](https://raw.githubusercontent.com/anthive/website/master/static/skins/client/1/hive.png)
* Еда [<img src="https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodbig.png" title="ant food" alt="ant food" width="20"/>](https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodbig.png)

<br>

```
На одной ячейке может быть и муравей и муравейник и еда одновременно
```
<br>

### Муравей

**Рождение**. Для получения нового муравья необходимо положить 7 еды (может отличаться в зависимости от испытания) в муравейник, после чего еда в муравейнике заменяется на нового муравья.

**Здоровье**. У каждого муравья 9 очков здоровья.

**Смерть**. Каждые 10 тиков (может отличаться в зависимости от испытания) сервера у всех муравьев на карте отнимается 1 очко здоровья - они голодают. По истечению всех очков здоровья муравей умирает. После смерти муравей превращается в 1 еду.  Для того, чтобы восполнить здоровье, муравей должен поесть. 1 еда восстанавливает 1 очко здоровья муравья. 

<br>

### Действия(`act`):
* `STAY` - оставаться на клетке
* `MOVE` - двигаться в указанном направлении на одну клетку
* `EAT` - есть еду с соседней указанной клетки
* `TAKE`- взять еду с соседней указанной клетки
* `PUT` - положить еду на соседнюю указанную клетку

<br>

### Направления(`dir`)

Муравьи могут двигаться в любом направлении на соседнюю клеточку.
* `UP` - вверх
* `DOWN` - вниз
* `LEFT` - влево
* `RIGHT` - вправо

<br>

### Еда

Еда, разбросанная по карте, содержит **от 1 до 9 единиц**. Визуально она изображена тремя типами:
* Маленькая - до 3 единиц еды [<img src="https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodsmall.png" title="small food" alt="small food"/>](https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodsmall.png)
* Средняя - до 6 единиц еды [<img src="https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodmid.png" title="mid food" alt="mid food"/>](https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodmid.png)
* Большая - до 9 единиц еды [<img src="https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodbig.png" title="big food" alt="big food"/>](https://raw.githubusercontent.com/anthive/website/master/static/skins/server/1/foodbig.png)

<br>

### Муравейник

Для того что бы ячейка карты стала муравейником в нее необходимо положить 9 еды. Размер муравейника - основной показатель успеха в соперничестве.

<br>

## Игровые режимы

### Схватка

Схватка это автоматический режим, без участия игроков где ваш бот соревнуется с каждым соперником по кругу. Такой круг игр называется **спринт**. Бот получает очки рейтинга когда побеждает в игре, а когда проигрывает теряет. Система автоматически подбирает близких по уровню противников. Важно, чтобы бот сделал как можно больше побед за один спринт, потому что в дополнение к очкам бота, это поднимает и рейтинг его создателя. В конце спринта вы получите результат и сможете посмотреть все сыгранные игры, проанализировать их и отредактировать бота.

#### Правила режима Схватка

Игра идет на картах разной заданной конфигурации. У каждого бота есть своя стартовая точка - муравейник. Боты начинают игру с одним муравьем. Чтобы популяция муравьев в колонии росла, необходимо добывать еду и приносить в муравейник. Новый муравей появится когда в муравейнике накопится 9 еды. Еды на карте не очень много, поэтому муравьи конкурируют за нее.
В игре побеждает бот, который наберет больше победных очков за 1000 тиков сервера.

### _Испытания (скоро появится)_

_Здесь вам предстоит преодолеть череду сложных программистских испытаний. Которые спроектированы с постепенным усложнением и ставят задачи для разных видов навыков, которые могут пригодиться в игре и в работе. Как только вы пройдете первое испытание, откроется следующее. Пройдите все испытания, чтобы получить различные награды и звания._

<br>

## Бот

**Бот** - это серверный код, который ожидает запросы от симуляции на порту:`7070`. Внутри запроса находится информация о каждом муравье, его положении на карте, а также расположение еды на карте. Бот осуществляет управление муравьями за счет ответов на HTTP запросы от **симуляции**, которые он “слушает” на порту. На основе данных из запроса **бот** принимает решение о следующем **шаге** для **каждого** муравья и отправляет его в симуляцию. Каждый ответ бота это массив с приказами, какое действие необходимо выполнить **каждому муравью** и в каком направлении. Муравьи могут взаимодействовать **только** с теми **ячейками** (клеточками) на карте, которые находятся вокруг них - слева, справа, сверху и снизу.

Приказ содержит в себе уникальный идентификатор муравья (`antId`), действие (`act`) и направление действия (`dir`), например:

`{ "antId": 1, "act": "unload", "dir": "up" }`,

После получения приказа симуляция обработает его, и сгенерирует новое состояние игры. Полный цикл от получения приказа до формирования нового состояния игры называется **тиком**.

<br>

## Возможные ошибки

* **ошибка взятия еды** - попытка взять еду из ячейки, в которой еда отсутствует.
* **ошибка отдачи еды** - попытка положить еду в момент, когда у муравья отсутствует еда.
* **неправильная попытка есть** - попытка поедания еды из соседней клетки, в которой отсутствует еда
* **коллизия** - возникает при нелегальном движении в клетку с другим муравьем, едой, выходе за пределы карты. Каждая ошибка снижает количество итоговых очков за игру.

<br>

## FAQ:

**Вопрос**: Что происходит когда муравьи разных ботов пытаются передвинуться на одну и ту же клетку в течение одного тика?
**Ответ**: В данном случае бот, который первым передаст в симуляцию приказ о движении муравья в ячейку выполнит движение, а муравьи остальных ботов получат ошибку с параметром замедление.


**Вопрос**: На каком языке программирования можно написать своего бота ?
**Ответ**: В текущей версии поддерживаются языки: Go, PHP, Javascript, C++, C#, Python.


**Вопрос**: Где хранится код ?
**Ответ**: Код хранится в Git репозитории. Поддерживаются Github, Gitlab и Bitbucket


**Вопрос**: Где появляется еда ?
**Ответ**: Еда появляется в количестве от 1 до 9 в случайных точках карты.

